# 层级管理器

**层级管理器** 面板用来展现当前场景里大部分节点的层级关系。场景中有部分不需要显示的节点，一般是支撑场景显示的必要因素，但不可操作，用户可以忽略，有做插件的时可另看详细说明（后续补充）。

你可以在 **层级管理器** 里选择，创建，移动，重命名或删除节点，任意节点都可创建出子节点，子节点的坐标系相对于父级节点。选中节点，节点呈现蓝底白字的高亮状态，节点的详细属性会在 **属性检查器** 中显示。

![面板全览](img/thumb.gif)

## 面板介绍

**层级管理器** 面板上主要有顶部菜单区，底部树形列表区：

- 顶部菜单的功能有：**新建节点按钮** ，**搜索类型按钮** ，**搜索框**，**全部折叠或展开按钮** ，**刷新列表按钮** 。
- 底部树形列表区主要体现节点的层级关系，根节点是 **场景节点**，编辑 prefab 文件时，根节点是不是 **场景节点**，而是自身的顶层节点。树形区域的尾部有 20px 高度的空白区域，点击此处可以 **取消选中**，即 **层级管理器** 中可以没有选中项。
- 面板支持右击菜单，不同位置和节点的右击菜单内容会有差异。
- 面板支持键盘快捷方式：

    - 复制：Ctrl or Cmd + C
    - 粘贴：Ctrl or Cmd + V
    - 拷贝：Ctrl or Cmd + D，Ctrl + 拖动节点
    - 删除：Delete
    - 上下选择：上下箭头
    - 节点的折叠：左箭头 或 Backspace
    - 节点的展开：右箭头 或 Enter
    - 多选：Ctrl or Cmd + 点击
    - 多选：Shift + 点击

## 新建节点

点击 **新建节点按钮** 新增节点的时候，会先出现一个 **输入框** 要求填入节点的名称，如果输入为空，则不会创建节点。树形列表中如果没有选中项，则默认新建到当前根节点上；如果有多个选中项，此时会新建到第一个选中节点里。
此外节点的右击菜单中也有 **新建** 的入口。

对于 UI 节点，它的显示有个规则：需要其上级节点中至少有一个含有 **cc.UITransformComponent** 组件，所以在创建 UI 节点的时候，为了让其显示，会主动检查该条规则，如果不符合规则，会辅助添加一个 **Canvas** 节点作为它的父级，以满足创建后可见。

此外还可以通过 **资源管理器** 中拖动一个 **prefab** 资源到 **层级管理器** 里生成一个节点。

![新建节点](img/create.png)

## 选中节点

在节点列表中可以使用以下操作选中节点：

- 点击可单选节点
- 键盘上下箭头可以上下切换选中
- 按住 Ctrl or Cmd + 点击，可以多选节点
- 按住 Shift + 点击，可以多选节点

## 移动节点

节点的移动分为移动到目标节点的上方，下方，内部。

移动需要两个节点：**被移动的节点** 和 **目标位置节点**，其中会对 **目标位置节点** 的高度进行三节划分，偏上，中部，偏下，各占 4px 左右。移动鼠标时会识别所处的位置：

- 偏上，样式为节点的顶部有已橙色横线，此时释放鼠标会将 **被移动的节点** 移到 **目标位置节点** 的上方，两者是平级的。
- 中部，样式为节点有橙色条背景，此时释放鼠标会将 **被移动的节点** 移到 **目标位置节点** 的内部，排在最末尾。

![移到节点里面](img/drop.png)

- 偏下，样式为节点有虚线连接线到尾部橙色横线，此时释放鼠标会将 **被移动的节点** 移到 **目标位置节点** 的下方，两者是平级的。

![移到节点下方](img/after.png)

此外 **属性检查器** 的某些属性值需要 **cc.Node** 类型数据，此时可以从 **层级管理器** 拖节点到 **属性检查器**。

## 搜索节点

头部菜单中的 **搜索类型按钮** 有 3 种排序方式：**搜索名称**，**搜索 UUID**，**搜索组件名称**。其中 **搜索组件名称** 是搜索节点组件，可在 **属性检查器** 查看到组件名称，如 **cc.ModelComponent**。

![搜索节点](img/search-type.png)

**搜索框** 变动即时搜索，在搜索结果中选中节点，清空搜索内容后，视窗范围内会重新定位到该选中的节点，以达到通过搜索来定位节点的目的。

![搜索节点](img/search.png)

## 折叠节点

**全部折叠或展开按钮** 便于回缩视图范围，更容易找到节点。树形中的父级节点支持快捷键方式，首先选中节点，然后键盘操作：

- 节点的折叠：左箭头 或 Backspace
- 节点的展开：右箭头 或 Enter

## 重命名节点

选中某个节点，快捷键 F2 或右击菜单的 **重命名** 可以进入修改名称，名称不能为空，为空或 **快捷键 Esc** 会取消此次重命名。**节点之间可以有相同的名称**。
